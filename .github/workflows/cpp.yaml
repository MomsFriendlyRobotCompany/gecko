name: Cpp
on: [push]

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@master
            # - name: Setup Python ${{ matrix.python-version }}
            #   uses: actions/setup-python@v1
            #   with:
            #     python-version: ${{ matrix.python-version }} # Version range or exact version of a Python version to use, using semvers version range syntax.
                # architecture: 'x64' # (x64 or x86)
            # - name: Set up Python ${{ matrix.python-version }}
            #   uses: actions/setup-python@v1
            #   with:
            #     python-version: ${{ matrix.python-version }}

            # - name: Cache node modules
            #   uses: actions/cache@v1
            #   with:
            #     path: /opt/gecko
            #     key: ${{ runner.OS }}-build-extlibs
            #     restore-keys: |
            #       ${{ runner.OS }}-build-extlibs
            - name: Install dependencies
              run: |
                cd cpp
                ./build_extlibs.sh
            - name: Test gecko
              run: |
                mkdir cpp/build
                cd cpp/build
                cmake ..
                make
                ./gtests/all-gtest
            # python -m pip install --upgrade pip setuptools wheel build_utils
            # - name: Lint with flake8
            #   run: |
            #     pip install flake8
            #     # stop the build if there are Python syntax errors or undefined names
            #     flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
            #     # exit-zero treats all errors as warnings. The GitHub editor is 127 chars wide
            #     flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
            # - name: nosetests
            #   run: |
            #     pip install nose
            #     cd python
            #     python -m pip install -e .
            #     cd tests
            #     nosetests -vs test.py
